{% extends 'base.html' %}
{% block title %}
<title>Profile</title>
{% endblock %}
{% block content %}
    <br><h2> {{ user.first_name }} {{ user.last_name }}'s profile</h2> <br>
    <div class="container profile-container">
        <div class="row profile-row">
            <div class="col-3 profile-column">
                <div class="row text-center">
                    <div class="col"><img src="{{ user.profile.profile_image }}" class="big_profile image-responsive rounded-circle"
                    onerror="this.onerror=null;this.src='/static/images/svg/person.svg';"></div>

                </div>
                <div class="row justify-content-center">
                    <a class="btn btn-primary mt-2" href="{% url 'accounts-logout' %}">Logout</a>
                </div>

            </div>
            <div class="col-9 profile-column">
                <div class="row profile2-row">
                    <div class="col profile-column">PERSONAL INFORMATION</div>
                </div>
                <div class="row profile3-row" id="profile-personal-info">
                    <div class="col profile-column">
                        First name: <bold>{{ user.first_name }}</bold> <br>
                        Last name: {{ user.last_name }} <br>
                        Email: {{ user.email }} <br>
                        Phone number: {{ user.profile.phone_number }} <br>
                        <a class="btn btn-primary mt-2 " id="profile-btn" href="{% url 'accounts-edit' %}">Edit profile</a>
                    </div>
                </div>
                <div class="row profile2-row">
                    <div class="col profile-column">SEARCH HISTORY</div>
                </div>
                <div class="row profile3-row">
                    <div class="col profile-column">
                        <table class="table table-striped profile-table">
                            <thead class="thead">
                                <tr>
                                    <th scope="col">Search</th>
                                    <th scope="col">Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for search in searches %}
                                    {% if forloop.counter <= 5 %}
                                        <tr>
                                            <td><a href="{% url 'product-index' %}?product-search={{ search.search }}">
                                                {{ search.search }}</a></td>
                                            <td>{{ search.date }}</td>
                                        </tr>
                                    {% endif %}
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="row justify-content-end" id="see-all">
                    <a href="{% url 'accounts-searchhistory' %}">See all</a>
                </div>
            </div>
        </div>
    </div>
{% endblock %}